[gd_resource type="CanvasItemShader" format=1]

[resource]

_code = {
"fragment": "uniform vec2 transitionPosition;
float changeRange = 0.05;

float dist = distance(transitionPosition, SCREEN_UV);
if (dist * 4 >= TIME)
{
	// Previous map
	COLOR=vec4(texscreen(SCREEN_UV), 1.0);
}
else
{
	if(dist * 4 + changeRange >= TIME)
	{
		// Blend
		COLOR=mix(vec4(texscreen(SCREEN_UV), 1.0), tex(TEXTURE, UV), 0.5);
	}
	else
	{
		// next map
		COLOR=tex(TEXTURE, UV);
	}
}",
"fragment_ofs": 0,
"light": "",
"light_ofs": 0,
"vertex": "",
"vertex_ofs": 0
}

