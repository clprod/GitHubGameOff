[gd_resource type="CanvasItemShader" format=1]

[resource]

_code = {
"fragment": "uniform vec2 transitionPosition;
uniform float time;
float changeRange = 0.05;

//float dist = distance(transitionPosition, SCREEN_UV);
float dist = sqrt(pow(transitionPosition.x - SCREEN_UV.x, 2) + pow(transitionPosition.y - SCREEN_UV.y, 3));
if (dist * 4 >= time)
{
	// Previous map
	COLOR=tex(TEXTURE, UV);
}
else
{
	if(dist * 4 + changeRange >= time)
	{
		// Blend
		COLOR=mix(vec4(texscreen(SCREEN_UV), 1.0), tex(TEXTURE, UV), 0.5);
	}
	else
	{
		// next map
		COLOR=vec4(texscreen(SCREEN_UV), 1.0);
	}
}",
"fragment_ofs": 0,
"light": "",
"light_ofs": 0,
"vertex": "",
"vertex_ofs": 0
}

